<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Contas Mensais (com Firebase)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Ícones Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Biblioteca Flatpickr para o calendário -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/monthSelect/index.js"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/pt.js"></script>

    <style>
        /* Estilos Gerais */
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #16a34a; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        .spinner { border: 2px solid #fff; border-top-color: transparent; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Checkbox customizado */
        .custom-checkbox { appearance: none; background-color: #fff; border: 1px solid #d1d5db; width: 1.5rem; height: 1.5rem; border-radius: 0.375rem; display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: background-color 0.2s, border-color 0.2s; }
        .custom-checkbox:checked { background-color: #16a34a; border-color: #16a34a; }
        .custom-checkbox:checked::after { content: '✔'; color: white; font-size: 1rem; line-height: 1.5rem; }
        
        /* Estilos para edição direta na tabela */
        .valor-editavel, .data-editavel { cursor: pointer; }
        .valor-editavel:hover .edit-icon, .data-editavel:hover .edit-icon { opacity: 1; }
        .edit-icon { opacity: 0; transition: opacity 0.2s; }
        
        /* Estilos para o Calendário de Meses em Grid */
        #date-picker-trigger { border: 1px solid transparent; }
        #date-picker-trigger:hover { border-color: #d1d5db; }

        .flatpickr-calendar {
            font-family: 'Inter', sans-serif;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            width: auto !important;
        }

        .flatpickr-months {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            padding: 12px;
        }

        .flatpickr-monthSelect-month {
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 8px 4px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            min-width: 60px;
        }

        .flatpickr-monthSelect-month:hover {
            background-color: #f3f4f6;
            border-color: #d1d5db;
        }

        .flatpickr-monthSelect-month.selected {
            background-color: #16a34a;
            color: white;
            border-color: #15803d;
        }
        
        .flatpickr-current-month {
            font-size: 1.1rem !important;
            padding-top: 12px !important;
            font-weight: 600 !important;
        }
        
        .flatpickr-prev-month, .flatpickr-next-month {
            display: none !important;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
        
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-800">Controle de Contas</h1>
                <div class="flex items-center gap-2 mt-2">
                    <button id="date-picker-trigger" class="text-gray-600 font-semibold p-2 rounded-lg transition-all hover:bg-gray-100"></button>
                    <div class="flex items-center">
                        <button onclick="window.App.navegarMes(-1)" class="p-2 rounded-full hover:bg-gray-100 transition-colors" aria-label="Mês anterior"><i data-lucide="chevron-left" class="w-5 h-5 text-gray-600"></i></button>
                        <button onclick="window.App.navegarMes(1)" class="p-2 rounded-full hover:bg-gray-100 transition-colors" aria-label="Próximo mês"><i data-lucide="chevron-right" class="w-5 h-5 text-gray-600"></i></button>
                    </div>
                </div>
            </div>
            <div class="mt-4 md:mt-0">
                <button onclick="window.App.openModal()" class="flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors shadow-sm"><i data-lucide="plus" class="w-5 h-5 mr-2"></i>Adicionar Conta Fixa</button>
            </div>
        </div>

        <!-- Painel de Resumo do Mês -->
        <div id="resumo-mensal" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-green-50 border-l-4 border-green-500 p-6 rounded-lg"><h3 class="text-sm font-medium text-green-800 uppercase">Total Pago no Mês</h3><p id="total-pago-mes" class="mt-2 text-4xl font-bold text-green-900">R$ 0,00</p></div>
            <div class="bg-red-50 border-l-4 border-red-500 p-6 rounded-lg"><h3 class="text-sm font-medium text-red-800 uppercase">Total Pendente</h3><p id="total-pendente-mes" class="mt-2 text-4xl font-bold text-red-900">R$ 0,00</p></div>
            <div class="bg-gray-50 border-l-4 border-gray-500 p-6 rounded-lg"><h3 class="text-sm font-medium text-gray-800 uppercase">Progresso do Mês</h3><div class="w-full bg-gray-200 rounded-full h-4 mt-3"><div id="progresso-barra" class="bg-green-600 h-4 rounded-full" style="width: 0%"></div></div><p id="progresso-texto" class="text-sm text-gray-700 mt-2 text-center">0% das contas pagas.</p></div>
        </div>

        <!-- Tabela de Contas -->
        <div class="bg-white rounded-lg overflow-hidden">
            <h2 class="text-xl font-semibold text-gray-700 p-4">Contas de <span id="nome-mes-tabela"></span></h2>
            <div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Conta</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Valor do Mês</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vencimento</th><th scope="col" class="relative px-6 py-3"><span class="sr-only">Ações</span></th></tr></thead><tbody id="contas-body" class="bg-white divide-y divide-gray-200"><tr id="contas-body-loader"><td colspan="5"><div class="loader"></div></td></tr></tbody></table></div>
        </div>
    </div>

    <!-- Modais -->
    <div id="item-modal" class="fixed inset-0 z-50 items-center justify-center hidden"><div class="modal-backdrop fixed inset-0" onclick="window.App.closeModal()"></div><div class="bg-white rounded-lg shadow-xl m-4 sm:max-w-lg w-full z-10"><div class="p-6"><div class="flex justify-between items-center"><h3 id="modal-title" class="text-xl font-semibold text-gray-800">Adicionar Conta</h3><button onclick="window.App.closeModal()" class="text-gray-400 hover:text-gray-600"><i data-lucide="x" class="w-6 h-6"></i></button></div><form id="item-form" class="mt-4 space-y-4"></form></div></div></div>
    <div id="delete-options-modal" class="fixed inset-0 z-50 items-center justify-center hidden"><div class="modal-backdrop fixed inset-0" onclick="window.App.closeDeleteOptionsModal()"></div><div class="bg-white rounded-lg shadow-xl m-4 sm:max-w-md w-full z-10">
        <div class="p-6 text-center"><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"><i data-lucide="trash-2" class="h-6 w-6 text-red-600"></i></div>
            <h3 class="text-lg leading-6 font-medium text-gray-900 mt-4">Como deseja remover a conta?</h3>
            <div class="mt-4 space-y-3"><button id="delete-this-month-btn" onclick="window.App.deletePagamentoDoMes()" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50">Remover somente neste mês</button><button id="delete-permanently-btn" onclick="window.App.deleteContaPermanentemente()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700">Excluir de todos os meses</button></div>
        </div><div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg"><button onclick="window.App.closeDeleteOptionsModal()" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm">Cancelar</button></div>
    </div></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, addDoc, doc, deleteDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

        // Configuração do Firebase atualizada
        const firebaseConfig = {
            apiKey: "AIzaSyCOoJT-0VO4dFZY0oWgWrgYYSs6CZTnYAY",
            authDomain: "controle-mensal-contas-t-ff83b.firebaseapp.com",
            projectId: "controle-mensal-contas-t-ff83b",
            storageBucket: "controle-mensal-contas-t-ff83b.firebasestorage.app",
            messagingSenderId: "280201891633",
            appId: "1:280201891633:web:5c6b5fa680ef87ebae6a10"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        let data = { contas: [], todosOsPagamentos: [], pagamentosDoMesVisivel: {} };
        let mesVisivel = new Date();
        let datePickerInstance = null;
        let deletingItemContext = null;

        const formatCurrency = (value) => new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value || 0);
        function renderUI() { renderTabelaContas(); updateSummary(); lucide.createIcons(); }
        function renderTabelaContas() { const tbody = document.getElementById('contas-body'); if (!tbody) return; document.getElementById('contas-body-loader')?.remove(); const contasOrdenadas = [...data.contas].sort((a, b) => (a.diaVencimento || 99) - (b.diaVencimento || 99)); const contasVisiveis = contasOrdenadas.filter(conta => data.pagamentosDoMesVisivel[conta.id]?.status !== 'removido'); if(contasVisiveis.length === 0) { tbody.innerHTML = `<tr><td colspan="5" class="text-center py-10 text-gray-500">Nenhuma conta para este mês.</td></tr>`; return; } tbody.innerHTML = contasVisiveis.map(conta => { const pagamentoEsteMes = data.pagamentosDoMesVisivel[conta.id]; const isPaga = pagamentoEsteMes?.status === 'pago'; const valorExibido = pagamentoEsteMes?.valor ?? conta.valorPadrao; const vencimentoExibido = pagamentoEsteMes?.vencimentoMes ?? conta.diaVencimento; return ` <tr class="${isPaga ? 'bg-green-50' : ''}"> <td class="px-6 py-4 text-center"><input type="checkbox" id="check-${conta.id}" class="custom-checkbox" onchange="window.App.togglePagamento('${conta.id}', this.checked)" ${isPaga ? 'checked' : ''}></td> <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${conta.nome || 'N/A'}</td> <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold ${isPaga ? 'text-green-700' : 'text-gray-600'}"> <div class="valor-editavel" onclick="window.App.editValorDoMes('${conta.id}')"> <span id="valor-display-${conta.id}" class="flex items-center gap-2">${formatCurrency(valorExibido)}<i data-lucide="pencil" class="w-3 h-3 text-gray-400 edit-icon"></i></span> <input type="number" step="0.01" id="valor-input-${conta.id}" class="hidden w-28 px-2 py-1 border border-green-500 rounded-md" onblur="window.App.saveValorDoMes('${conta.id}')" onkeydown="if(event.key==='Enter') this.blur()"> </div> </td> <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> <div class="data-editavel" onclick="window.App.editVencimentoDoMes('${conta.id}')"> <span id="vencimento-display-${conta.id}" class="flex items-center gap-2">Dia ${vencimentoExibido || '-'}<i data-lucide="pencil" class="w-3 h-3 text-gray-400 edit-icon"></i></span> <input type="number" min="1" max="31" id="vencimento-input-${conta.id}" class="hidden w-20 px-2 py-1 border border-green-500 rounded-md" onblur="window.App.saveVencimentoDoMes('${conta.id}')" onkeydown="if(event.key==='Enter') this.blur()"> </div> </td> <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button onclick="window.App.deleteItem('${conta.id}')" class="text-gray-400 hover:text-red-600 p-1 rounded-full"><i data-lucide="trash-2" class="w-4 h-4"></i></button></td> </tr>`; }).join(''); };
        function updateSummary() { let totalPago = 0, totalPendente = 0, contasPagas = 0; const contasVisiveis = data.contas.filter(c => data.pagamentosDoMesVisivel[c.id]?.status !== 'removido'); contasVisiveis.forEach(conta => { const pagamento = data.pagamentosDoMesVisivel[conta.id]; const valorConsiderado = pagamento?.valor ?? conta.valorPadrao; if (pagamento?.status === 'pago') { totalPago += valorConsiderado; contasPagas++; } else { totalPendente += valorConsiderado; } }); const totalContas = contasVisiveis.length; const progresso = totalContas > 0 ? (contasPagas / totalContas) * 100 : 0; document.getElementById('total-pago-mes').textContent = formatCurrency(totalPago); document.getElementById('total-pendente-mes').textContent = formatCurrency(totalPendente); document.getElementById('progresso-barra').style.width = `${progresso}%`; document.getElementById('progresso-texto').textContent = `${progresso.toFixed(0)}% das contas pagas (${contasPagas} de ${totalContas}).`; };
        
        const App = {
            navegarMes(direcao) {
                const novaData = new Date(mesVisivel);
                novaData.setDate(1);
                novaData.setMonth(novaData.getMonth() + direcao);
                datePickerInstance.setDate(novaData, true);
            },
            carregarDadosDoMes() {
                const mesAnoVisivelStr = `${mesVisivel.getFullYear()}-${String(mesVisivel.getMonth() + 1).padStart(2, '0')}`;
                const nomeMes = mesVisivel.toLocaleString('pt-BR', { month: 'long' });
                const ano = mesVisivel.getFullYear();
                const tituloMes = `${nomeMes.charAt(0).toUpperCase() + nomeMes.slice(1)} de ${ano}`;
                document.getElementById('date-picker-trigger').textContent = tituloMes;
                document.getElementById('nome-mes-tabela').textContent = tituloMes;
                
                data.pagamentosDoMesVisivel = {};
                data.todosOsPagamentos.forEach(pag => {
                    if (pag.mesAno === mesAnoVisivelStr) {
                        data.pagamentosDoMesVisivel[pag.contaId] = pag;
                    }
                });
                renderUI();
            },
            editValorDoMes(contaId) { const display = document.getElementById(`valor-display-${contaId}`); const input = document.getElementById(`valor-input-${contaId}`); if (!display.classList.contains('hidden')) { const conta = data.contas.find(c => c.id === contaId); const pagamento = data.pagamentosDoMesVisivel[contaId]; input.value = pagamento?.valor ?? conta.valorPadrao; display.classList.add('hidden'); input.classList.remove('hidden'); input.focus(); input.select(); } },
            async saveValorDoMes(contaId) { const input = document.getElementById(`valor-input-${contaId}`); input.classList.add('hidden'); document.getElementById(`valor-display-${contaId}`).classList.remove('hidden'); const novoValor = parseFloat(input.value); if (isNaN(novoValor)) { renderUI(); return; } const mesAnoVisivelStr = `${mesVisivel.getFullYear()}-${String(mesVisivel.getMonth() + 1).padStart(2, '0')}`; const pagamentoDocId = `${contaId}_${mesAnoVisivelStr}`; const docRef = doc(db, "pagamentos", pagamentoDocId); try { await setDoc(docRef, { contaId, mesAno: mesAnoVisivelStr, valor: novoValor }, { merge: true }); } catch (e) { console.error("Erro ao salvar valor:", e); } },
            editVencimentoDoMes(contaId) { const display = document.getElementById(`vencimento-display-${contaId}`); const input = document.getElementById(`vencimento-input-${contaId}`); if (!display.classList.contains('hidden')) { const conta = data.contas.find(c => c.id === contaId); const pagamento = data.pagamentosDoMesVisivel[contaId]; input.value = pagamento?.vencimentoMes ?? conta.diaVencimento; display.classList.add('hidden'); input.classList.remove('hidden'); input.focus(); input.select(); } },
            async saveVencimentoDoMes(contaId) { const input = document.getElementById(`vencimento-input-${contaId}`); input.classList.add('hidden'); document.getElementById(`vencimento-display-${contaId}`).classList.remove('hidden'); let novoDia = parseInt(input.value); if (isNaN(novoDia) || novoDia < 1 || novoDia > 31) { renderUI(); return; } const mesAnoVisivelStr = `${mesVisivel.getFullYear()}-${String(mesVisivel.getMonth() + 1).padStart(2, '0')}`; const pagamentoDocId = `${contaId}_${mesAnoVisivelStr}`; const docRef = doc(db, "pagamentos", pagamentoDocId); try { await setDoc(docRef, { contaId, mesAno: mesAnoVisivelStr, vencimentoMes: novoDia }, { merge: true }); } catch (e) { console.error("Erro ao salvar vencimento:", e); } },
            async togglePagamento(contaId, isChecked) { const conta = data.contas.find(c => c.id === contaId); if (!conta) return; const mesAnoVisivelStr = `${mesVisivel.getFullYear()}-${String(mesVisivel.getMonth() + 1).padStart(2, '0')}`; const pagamentoDocId = `${contaId}_${mesAnoVisivelStr}`; const docRef = doc(db, "pagamentos", pagamentoDocId); const pagamentoExistente = data.pagamentosDoMesVisivel[contaId]; const novoStatus = isChecked ? 'pago' : 'pendente'; const dadosParaSalvar = { contaId, mesAno: mesAnoVisivelStr, status: novoStatus, valor: pagamentoExistente?.valor ?? conta.valorPadrao, vencimentoMes: pagamentoExistente?.vencimentoMes ?? conta.diaVencimento }; if(isChecked) { dadosParaSalvar.dataPagamento = new Date().toISOString(); } try { await setDoc(docRef, dadosParaSalvar, { merge: true }); } catch (e) { console.error("Erro ao atualizar pagamento: ", e); } },
            openModal() { const form = document.getElementById('item-form'); const modalTitle = document.getElementById('modal-title'); modalTitle.textContent = 'Adicionar Conta Fixa'; form.innerHTML = this.getFormFields(); form.onsubmit = (e) => this.saveItem(e); document.getElementById('item-modal').classList.remove('hidden'); document.getElementById('item-modal').classList.add('flex'); lucide.createIcons(); },
            closeModal() { document.getElementById('item-modal').classList.add('hidden'); document.getElementById('item-modal').classList.remove('flex'); },
            getFormFields() { const createField = (label, id, inputType, props) => `<div><label for="${id}" class="block text-sm font-medium text-gray-700">${label}</label><input type="${inputType}" id="${id}" name="${id}" ${props} class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm"></div>`; const fields = `${createField('Nome da Conta', 'nome', 'text', 'placeholder="Ex: Aluguel, Internet"')}${createField('Valor Padrão (R$)', 'valorPadrao', 'number', 'step="0.01" placeholder="150.50"')}${createField('Dia do Vencimento', 'diaVencimento', 'number', 'min="1" max="31" placeholder="10"')}`; return fields + `<div class="pt-2 flex justify-end space-x-3"><button type="button" onclick="window.App.closeModal()" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50">Cancelar</button><button id="save-form-btn" type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700">Salvar</button></div>`; },
            async saveItem(event) { event.preventDefault(); const saveButton = event.target.querySelector('button[type="submit"]'); saveButton.disabled = true; saveButton.innerHTML = `<div class="w-5 h-5 border-2 border-white spinner rounded-full animate-spin mx-auto"></div>`; const newItemData = Object.fromEntries(new FormData(event.target).entries()); newItemData.valorPadrao = parseFloat(newItemData.valorPadrao) || 0; newItemData.diaVencimento = parseInt(newItemData.diaVencimento) || null; try { await addDoc(collection(db, "contas"), newItemData); this.closeModal(); } catch (e) { console.error("Erro ao salvar conta: ", e); } finally { saveButton.disabled = false; saveButton.innerHTML = 'Salvar'; } },
            deleteItem(id) { deletingItemContext = { id }; document.getElementById('delete-options-modal').classList.remove('hidden'); document.getElementById('delete-options-modal').classList.add('flex'); lucide.createIcons(); },
            closeDeleteOptionsModal() { document.getElementById('delete-options-modal').classList.add('hidden'); deletingItemContext = null; },
            async deletePagamentoDoMes() { const { id } = deletingItemContext; const mesAnoVisivelStr = `${mesVisivel.getFullYear()}-${String(mesVisivel.getMonth() + 1).padStart(2, '0')}`; const pagamentoDocId = `${id}_${mesAnoVisivelStr}`; const docRef = doc(db, "pagamentos", pagamentoDocId); try { await setDoc(docRef, { contaId: id, mesAno: mesAnoVisivelStr, status: 'removido' }, { merge: true }); } catch (e) { console.error("Erro ao remover pagamento do mês:", e); } finally { this.closeDeleteOptionsModal(); } },
            async deleteContaPermanentemente() { const { id } = deletingItemContext; try { await deleteDoc(doc(db, "contas", id)); } catch (e) { console.error("Erro ao excluir conta permanentemente:", e); } finally { this.closeDeleteOptionsModal(); } },
            
            init() {
                datePickerInstance = flatpickr("#date-picker-trigger", {
                    locale: "pt",
                    plugins: [ new monthSelectPlugin({ shorthand: true, dateFormat: "Y-m-d", altFormat: "F Y" }) ],
                    onChange: (selectedDates) => {
                        if (!selectedDates[0]) return;
                        mesVisivel = selectedDates[0];
                        this.carregarDadosDoMes();
                    },
                });
                
                onSnapshot(collection(db, 'contas'), (snapshot) => {
                    data.contas = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));
                    this.carregarDadosDoMes();
                });

                onSnapshot(collection(db, 'pagamentos'), (snapshot) => {
                    data.todosOsPagamentos = snapshot.docs.map(doc => {
                        const [contaId, mesAno] = doc.id.split('_');
                        return {...doc.data(), id: doc.id, contaId, mesAno };
                    });
                    this.carregarDadosDoMes();
                });
            }
        };
        
        window.App = App;
        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
